# =============================================================================
# CORE APPLICATION
# =============================================================================
# Application name - used in emails, notifications, and UI
APP_NAME=Beam Framework

# Environment: local, development, staging, production
# Controls error display and debug features
APP_ENV=local

# Debug mode - set to false in production for security
# Shows detailed error messages and stack traces
APP_DEBUG=true

# Application version - for tracking deployments
APP_VERSION=1.0.0

# Base URL for the application - used for asset URLs and redirects
# Examples: http://localhost:8000, https://yourapp.com
APP_URL=http://localhost:8000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# The Beam Framework supports auto-discovery of database connections.
# Pattern: {NAME}_DB_HOST, {NAME}_DB_PORT, {NAME}_DB_DATABASE, etc.
# Examples: MAIN_DB_HOST, ANALYTICS_DB_HOST, SOURCE_DB_HOST
# Used by: Config/Database.php

# Auto-run database migrations on application startup
# Set to false in production and run migrations manually
AUTO_MIGRATE=true

# Default database connection name
# This connection will be used when you call DB::connection() without arguments
DB_DEFAULT=main

# -----------------------------------------------------------------------------
# SQLite Database (Simple, File-based - Good for Development)
# -----------------------------------------------------------------------------
# Path to SQLite database file (relative to project root)
APP_DB=Infrastructure/Persistence/Database/app.db

# -----------------------------------------------------------------------------
# PostgreSQL Database (RECOMMENDED for Production)
# -----------------------------------------------------------------------------
MAIN_DB_DRIVER=pgsql
MAIN_DB_HOST=localhost
MAIN_DB_PORT=5432
MAIN_DB_DATABASE=beam
MAIN_DB_USERNAME=postgres
MAIN_DB_PASSWORD=

# Optional PostgreSQL settings
# MAIN_DB_CHARSET=utf8
# MAIN_DB_SCHEMA=public
# MAIN_DB_TIMEOUT=30
# MAIN_DB_PREFIX=

# -----------------------------------------------------------------------------
# MySQL Database (Alternative)
# -----------------------------------------------------------------------------
# MAIN_DB_DRIVER=mysql
# MAIN_DB_HOST=localhost
# MAIN_DB_PORT=3306
# MAIN_DB_DATABASE=beam
# MAIN_DB_USERNAME=root
# MAIN_DB_PASSWORD=
# MAIN_DB_CHARSET=utf8mb4

# -----------------------------------------------------------------------------
# SQL Server Database (Enterprise)
# -----------------------------------------------------------------------------
# MAIN_DB_DRIVER=sqlsrv
# MAIN_DB_HOST=localhost
# MAIN_DB_PORT=1433
# MAIN_DB_DATABASE=beam
# MAIN_DB_USERNAME=sa
# MAIN_DB_PASSWORD=

# -----------------------------------------------------------------------------
# Multiple Database Connections (Example)
# -----------------------------------------------------------------------------
# Analytics Database (MySQL)
# ANALYTICS_DB_DRIVER=mysql
# ANALYTICS_DB_HOST=analytics.example.com
# ANALYTICS_DB_PORT=3306
# ANALYTICS_DB_DATABASE=analytics
# ANALYTICS_DB_USERNAME=analytics_user
# ANALYTICS_DB_PASSWORD=secret

# Source/Legacy Database (PostgreSQL)
# SOURCE_DB_DRIVER=pgsql
# SOURCE_DB_HOST=legacy.example.com
# SOURCE_DB_PORT=5432
# SOURCE_DB_DATABASE=legacy_db
# SOURCE_DB_USERNAME=legacy_user
# SOURCE_DB_PASSWORD=secret

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# Used by: Config/Logging.php
# The framework supports multiple logging handlers and channels

# Log handler type: file, database, syslog
# - file: Writes to storage/logs/app.log (auto-rotates at 10MB, keeps 5 files)
# - database: Writes to 'logs' table in database (requires migration)
# - syslog: Writes to system syslog (Unix/Linux only)
LOG_HANDLER=file

# Minimum log level to capture
# Levels (in order): DEBUG, INFO, NOTICE, WARNING, ERROR, CRITICAL, ALERT, EMERGENCY
# Development: DEBUG (captures everything)
# Production: WARNING or ERROR (only important messages)
LOG_LEVEL=DEBUG

# Storage operation logging (used by Framework/Storage)
# Log all storage operations (upload, download, delete)
LOG_STORAGE_OPERATIONS=true

# Only log failed storage operations (reduces log volume)
LOG_STORAGE_FAILURES_ONLY=true

# Include file sizes in storage logs (helpful for debugging)
LOG_STORAGE_FILE_SIZES=false

# Database Logging Example (requires logs table migration)
# LOG_HANDLER=database

# Syslog Example (Unix/Linux systems)
# LOG_HANDLER=syslog

# Production Log Level (less verbose)
# LOG_LEVEL=WARNING

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
# Used by: Config/Cache.php
# The framework supports multiple cache drivers for performance and scalability

# Default cache driver
# Options: file, redis, memcached, memcache, array, database
# - file: File-based cache (no dependencies, good for single server)
# - redis: High-performance in-memory cache (requires php-redis extension)
# - memcached: Distributed memory cache (requires php-memcached extension)
# - memcache: Legacy Memcache (requires php-memcache extension)
# - array: In-memory cache for current request only (testing)
# - database: Database-backed cache (requires cache table migration)
CACHE_DRIVER=file

# Default cache TTL (Time To Live) in seconds
CACHE_TTL=3600

# Cache key prefix (prevents collisions with other applications)
CACHE_PREFIX=pop_cache

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# Used by: RedisCache driver and RedisSessionHandler
# Requires: php-redis extension
# Install: pecl install redis or apt-get install php-redis

# Redis server connection
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=

# Redis databases (0-15, use different DBs for cache vs sessions)
REDIS_DB=0                    # Cache database
REDIS_SESSION_DB=1             # Session database

# Redis key prefixes
REDIS_PREFIX=pop_cache:
REDIS_SESSION_PREFIX=pop_session:

# =============================================================================
# MEMCACHED CONFIGURATION
# =============================================================================
# Used by: MemcachedCache driver and MemcachedSessionHandler
# Requires: php-memcached extension (modern, libmemcached-based)
# Install: pecl install memcached or apt-get install php-memcached

# Memcached server(s)
MEMCACHED_HOST=127.0.0.1
MEMCACHED_PORT=11211

# Persistent connection ID (optional, improves performance)
MEMCACHED_PERSISTENT_ID=

# Key prefixes
MEMCACHED_PREFIX=pop_cache:
MEMCACHED_SESSION_PREFIX=pop_session:

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
# Used by: Config/Storage.php
# The framework supports multiple storage drivers: local, public, ftp, s3, sftp, etc.

# Default storage disk to use
# Options: local, public, temp, ftp, backup, sftp, s3, spaces, minio, cdn
STORAGE_DISK=local

# -----------------------------------------------------------------------------
# FTP Storage Configuration
# -----------------------------------------------------------------------------
# Used by: Config/Ftp.php (auto-discovers FTP connections)
# Pattern: {NAME}_FTP_HOST, {NAME}_FTP_PORT, etc.
# Examples: FTP_* (default), BACKUP_FTP_*, CDN_FTP_*

# FTP Storage Disk Settings
# STORAGE_FTP_CONNECTION=default
# STORAGE_FTP_ROOT=/uploads
# STORAGE_FTP_URL=https://ftp.example.com/uploads

# Default FTP Connection
# FTP_HOST=ftp.example.com
# FTP_PORT=21
# FTP_USERNAME=ftpuser
# FTP_PASSWORD=secret
# FTP_PATH=/
# FTP_PASSIVE=true
# FTP_SSL=false
# FTP_TIMEOUT=90

# Backup FTP Server (named connection example)
# BACKUP_FTP_HOST=backup.example.com
# BACKUP_FTP_PORT=21
# BACKUP_FTP_USERNAME=backup
# BACKUP_FTP_PASSWORD=secret
# BACKUP_FTP_PATH=/backups
# BACKUP_FTP_PASSIVE=true
# BACKUP_FTP_SSL=false
# BACKUP_FTP_TIMEOUT=90

# CDN FTP Server (named connection example)
# CDN_FTP_HOST=cdn.example.com
# CDN_FTP_PORT=21
# CDN_FTP_USERNAME=cdn
# CDN_FTP_PASSWORD=secret
# CDN_FTP_PATH=/public
# CDN_FTP_PASSIVE=true
# CDN_FTP_SSL=true
# CDN_FTP_TIMEOUT=90

# -----------------------------------------------------------------------------
# SFTP Storage Configuration (Requires php-ssh2 extension)
# -----------------------------------------------------------------------------
# Secure FTP using SSH protocol
# Install: sudo apt-get install php-ssh2 (Ubuntu/Debian)

# Password-based authentication
# SFTP_HOST=sftp.example.com
# SFTP_PORT=22
# SFTP_USERNAME=sftpuser
# SFTP_PASSWORD=secret
# SFTP_ROOT=/uploads
# SFTP_URL=https://sftp.example.com/uploads

# Key-based authentication (RECOMMENDED for security)
# SFTP_HOST=sftp.example.com
# SFTP_PORT=22
# SFTP_USERNAME=sftpuser
# SFTP_PRIVATE_KEY=/path/to/private/key
# SFTP_PUBLIC_KEY=/path/to/public/key.pub
# SFTP_PASSPHRASE=key-passphrase
# SFTP_ROOT=/uploads
# SFTP_URL=https://sftp.example.com/uploads

# -----------------------------------------------------------------------------
# Amazon S3 Configuration
# -----------------------------------------------------------------------------
# Get credentials: https://console.aws.amazon.com/iam/
# Create IAM user with S3 permissions and generate access keys

# AWS_ACCESS_KEY_ID=your-access-key-id
# AWS_SECRET_ACCESS_KEY=your-secret-access-key
# AWS_DEFAULT_REGION=us-east-1
# AWS_BUCKET=your-bucket-name
# AWS_URL=https://your-bucket.s3.amazonaws.com
# AWS_ENDPOINT=

# Custom S3 endpoint (for S3-compatible services)
# AWS_ENDPOINT=https://s3.wasabisys.com

# -----------------------------------------------------------------------------
# DigitalOcean Spaces Configuration
# -----------------------------------------------------------------------------
# Get credentials: https://cloud.digitalocean.com/account/api/tokens
# Create Spaces access keys

# DO_SPACES_KEY=your-spaces-key
# DO_SPACES_SECRET=your-spaces-secret
# DO_SPACES_REGION=nyc3
# DO_SPACES_BUCKET=your-bucket-name
# DO_SPACES_ENDPOINT=https://nyc3.digitaloceanspaces.com
# DO_SPACES_URL=https://your-bucket.nyc3.digitaloceanspaces.com

# Available regions: nyc3, sfo2, sfo3, sgp1, ams3, fra1

# -----------------------------------------------------------------------------
# MinIO Configuration (Self-hosted S3-compatible storage)
# -----------------------------------------------------------------------------
# Setup: https://min.io/docs/minio/linux/operations/install-deploy-manage/deploy-minio-single-node-single-drive.html

# MINIO_ACCESS_KEY=your-access-key
# MINIO_SECRET_KEY=your-secret-key
# MINIO_REGION=us-east-1
# MINIO_BUCKET=your-bucket
# MINIO_ENDPOINT=http://localhost:9000
# MINIO_URL=http://localhost:9000/your-bucket

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================
# Used by: Config/RateLimit.php and Framework/Validation/RateLimiter.php
# Protects API endpoints from abuse and brute force attacks
# Now uses the cache system for all backends

# Backend storage (uses cache system)
# Options: file, redis, memcached, database
# - file: File-based cache (simple, single server)
# - redis: High-performance, distributed (recommended for production)
# - memcached: Distributed memory cache
# - database: Database-backed (persistent but slower)
RATE_LIMIT_BACKEND=file

# Include rate limit headers in API responses
# Headers: X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
RATE_LIMIT_HEADERS=true

# -----------------------------------------------------------------------------
# Default Rate Limits (used by Config/RateLimit.php)
# -----------------------------------------------------------------------------
# Global default: 60 requests per 1 minute
# RATE_LIMIT_DEFAULT_ATTEMPTS=60
# RATE_LIMIT_DEFAULT_DECAY=1

# API endpoints: 60 requests per 1 minute
# RATE_LIMIT_API_ATTEMPTS=60
# RATE_LIMIT_API_DECAY=1

# Login attempts: 5 attempts per 15 minutes (brute force protection)
# RATE_LIMIT_LOGIN_ATTEMPTS=5
# RATE_LIMIT_LOGIN_DECAY=15

# Registration: 3 attempts per 60 minutes (prevent spam accounts)
# RATE_LIMIT_REGISTRATION_ATTEMPTS=3
# RATE_LIMIT_REGISTRATION_DECAY=60

# Password reset: 3 attempts per 60 minutes
# RATE_LIMIT_PASSWORD_RESET_ATTEMPTS=3
# RATE_LIMIT_PASSWORD_RESET_DECAY=60

# File uploads: 10 attempts per 5 minutes
# RATE_LIMIT_UPLOAD_ATTEMPTS=10
# RATE_LIMIT_UPLOAD_DECAY=5

# Search queries: 30 attempts per 1 minute
# RATE_LIMIT_SEARCH_ATTEMPTS=30
# RATE_LIMIT_SEARCH_DECAY=1

# =============================================================================
# GEOLOCATION API (UserActivity Feature - Optional)
# =============================================================================
# Used by: Features/UserActivity/Shared/Services/GeolocationService.php
# Enables IP-based location tracking for user activity logs
# If not configured, geolocation is gracefully skipped (feature still works)

# -----------------------------------------------------------------------------
# Option 1: ipapi.co (Free tier: 1,000 requests/day, no API key needed)
# -----------------------------------------------------------------------------
# Get started: https://ipapi.co/
# LOCATION_API_URL=https://ipapi.co/{ip}/json/
# LOCATION_API_KEY=

# -----------------------------------------------------------------------------
# Option 2: ipgeolocation.io (Free tier: 1,000 requests/day)
# -----------------------------------------------------------------------------
# Get API key: https://ipgeolocation.io/signup
# LOCATION_API_URL=https://api.ipgeolocation.io/ipgeo
# LOCATION_API_KEY=your-api-key-here

# -----------------------------------------------------------------------------
# Option 3: ipstack.com (Free tier: 10,000 requests/month)
# -----------------------------------------------------------------------------
# Get API key: https://ipstack.com/signup/free
# LOCATION_API_URL=http://api.ipstack.com/{ip}
# LOCATION_API_KEY=your-access-key

# -----------------------------------------------------------------------------
# Option 4: ip-api.com (Free, no API key, rate limited to 45 req/min)
# -----------------------------------------------------------------------------
# Documentation: https://ip-api.com/docs/api:json
# LOCATION_API_URL=http://ip-api.com/json/{ip}
# LOCATION_API_KEY=

# =============================================================================
# VALIDATION CONFIGURATION
# =============================================================================
# Used by: Config/Validation.php
# Controls file upload limits and input validation

# Maximum file upload size in KB (10240 KB = 10 MB)
# Ensure this matches your php.ini settings:
# - upload_max_filesize
# - post_max_size
MAX_FILE_SIZE=10240

# Auto-sanitize all user input (trim whitespace, escape HTML)
# Set to true to enable automatic sanitization
# AUTO_SANITIZE_INPUT=false

# =============================================================================
# VITE DEV SERVER
# =============================================================================
# Frontend development server configuration
# Used during development for hot module replacement (HMR)

# Vite server host
# - Use 'localhost' when accessing from the same machine
# - Use your server IP (e.g., 192.168.0.236) when accessing remotely
VITE_HOST=localhost

# Vite server port (default: 5173)
VITE_PORT=5173

# =============================================================================
# SESSION CONFIGURATION
# =============================================================================
# Used by: Framework/Http/Session.php and session handlers
# Supports multiple backend drivers for distributed/scalable sessions

# Session driver
# Options: file, redis, memcached, memcache, database
# - file: File-based sessions in storage/sessions (default, simple)
# - redis: Redis-backed sessions (requires php-redis, distributed)
# - memcached: Memcached sessions (requires php-memcached, distributed)
# - memcache: Legacy Memcache sessions (requires php-memcache)
# - database: Database sessions (requires sessions table migration)
SESSION_DRIVER=file

# Session lifetime in seconds (43200 = 12 hours)
SESSION_LIFETIME=43200

# Database session configuration (if SESSION_DRIVER=database)
SESSION_DB_CONNECTION=app
SESSION_DB_TABLE=sessions

# Redis Session Configuration (if using SESSION_DRIVER=redis)
# REDIS_HOST=127.0.0.1
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DATABASE=0

# Memcached Session Configuration (if using SESSION_DRIVER=memcached)
# MEMCACHED_HOST=127.0.0.1
# MEMCACHED_PORT=11211

# =============================================================================
# MAIL CONFIGURATION (Optional)
# =============================================================================
# Email sending configuration
# Used by: Framework mailer (if implemented)

# Mail driver: smtp, sendmail, mailgun, ses, postmark
MAIL_MAILER=smtp

# SMTP Configuration
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null

# Encryption: null, tls, ssl
# MAIL_ENCRYPTION=tls

# From address (used as default sender)
# MAIL_FROM_ADDRESS=noreply@example.com
# MAIL_FROM_NAME="${APP_NAME}"

# -----------------------------------------------------------------------------
# Mailgun Configuration (if using MAIL_MAILER=mailgun)
# -----------------------------------------------------------------------------
# Get credentials: https://www.mailgun.com/
# MAILGUN_DOMAIN=mg.example.com
# MAILGUN_SECRET=your-secret-key
# MAILGUN_ENDPOINT=api.mailgun.net

# -----------------------------------------------------------------------------
# Amazon SES Configuration (if using MAIL_MAILER=ses)
# -----------------------------------------------------------------------------
# Get credentials: https://console.aws.amazon.com/ses/
# SES_KEY=your-ses-key
# SES_SECRET=your-ses-secret
# SES_REGION=us-east-1

# -----------------------------------------------------------------------------
# Postmark Configuration (if using MAIL_MAILER=postmark)
# -----------------------------------------------------------------------------
# Get token: https://postmarkapp.com/
# POSTMARK_TOKEN=your-server-token

# =============================================================================
# SECURITY NOTES
# =============================================================================
# NEVER commit the .env file to version control!
# Always use strong, unique passwords for production environments
# Rotate credentials regularly
# Use environment-specific credentials (dev, staging, production)
# Enable SSL/TLS for all external services in production
# Use key-based authentication (SSH keys) when possible

# =============================================================================
# GETTING STARTED
# =============================================================================
# 1. Copy this file to .env: cp .env.example .env
# 2. Update the database configuration (SQLite for quick start, PostgreSQL for production)
# 3. Update APP_URL to match your local development URL
# 4. Set AUTO_MIGRATE=true to automatically run database migrations
# 5. Optional: Configure logging, storage, and other features as needed
# 6. Run the development server: php beam dev
